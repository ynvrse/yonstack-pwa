import{c as i,R as U,j as e}from"./theme-provider-BLIrfkjI.js";import{i as P,e as k,a as W,B as Z,d as q,u as H,X as $}from"./App-DteNmcQd.js";import{C as B,a as V,L as Y}from"./label-B1f5emL6.js";import"./index-DVYklf_w.js";function F(){return window.innerHeight>window.innerWidth}function J(){const[t,o]=i.useState(F());return i.useEffect(()=>{function s(){o(F())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),t}const p=P({appId:k.instantDbAppId});function Q(t){const o=t.split(".")[1],s=atob(o);return JSON.parse(s)}function X(){const[t]=i.useState(()=>crypto.randomUUID()),o={profiles:{}},{isLoading:s,data:c}=p.useQuery(o);return{nonce:t,isLoading:s,handleGoogleSuccess:async({credential:l})=>{try{if(!l)throw new Error("No credential received");const r=Q(l),{user:a}=await p.auth.signInWithIdToken({clientName:k.googleClientName,idToken:l,nonce:t});((c==null?void 0:c.profiles)??[]).find(m=>m.userId===a.id)||await p.transact(p.tx.profiles[W()].update({userId:a.id,firstName:r.given_name||"",lastName:r.family_name||"",fullName:r.name||"",profilePicture:r.picture||"",email:r.email||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}catch(r){console.error("Error during login:",r),alert("Terjadi kesalahan saat login: "+(r.message||"Unknown error"))}},handleGoogleError:()=>{console.error("Google login failed"),alert("Login Google gagal. Silakan coba lagi.")}}}function K(t={}){const{nonce:o,onScriptLoadSuccess:s,onScriptLoadError:c}=t,[u,n]=i.useState(!1),l=i.useRef(s);l.current=s;const r=i.useRef(c);return r.current=c,i.useEffect(()=>{const a=document.createElement("script");return a.src="https://accounts.google.com/gsi/client",a.async=!0,a.defer=!0,a.nonce=o,a.onload=()=>{var d;n(!0),(d=l.current)===null||d===void 0||d.call(l)},a.onerror=()=>{var d;n(!1),(d=r.current)===null||d===void 0||d.call(r)},document.body.appendChild(a),()=>{document.body.removeChild(a)}},[o]),u}const O=i.createContext(null);function e2({clientId:t,nonce:o,onScriptLoadSuccess:s,onScriptLoadError:c,children:u}){const n=K({nonce:o,onScriptLoadSuccess:s,onScriptLoadError:c}),l=i.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:n}),[t,n]);return U.createElement(O.Provider,{value:l},u)}function t2(){const t=i.useContext(O);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function s2(t){var o;return(o=t==null?void 0:t.clientId)!==null&&o!==void 0?o:t==null?void 0:t.client_id}const o2={large:40,medium:32,small:20};function c2({onSuccess:t,onError:o,useOneTap:s,promptMomentNotification:c,type:u="standard",theme:n="outline",size:l="large",text:r,shape:a,logo_alignment:d,width:h,locale:m,click_listener:R,containerProps:x,...T}){const G=i.useRef(null),{clientId:I,scriptLoadedSuccessfully:M}=t2(),A=i.useRef(t);A.current=t;const w=i.useRef(o);w.current=o;const D=i.useRef(c);return D.current=c,i.useEffect(()=>{var C,y,L,j,S,b,N,_,E;if(M)return(L=(y=(C=window==null?void 0:window.google)===null||C===void 0?void 0:C.accounts)===null||y===void 0?void 0:y.id)===null||L===void 0||L.initialize({client_id:I,callback:g=>{var f;if(!(g!=null&&g.credential))return(f=w.current)===null||f===void 0?void 0:f.call(w);const{credential:v,select_by:z}=g;A.current({credential:v,clientId:s2(g),select_by:z})},...T}),(b=(S=(j=window==null?void 0:window.google)===null||j===void 0?void 0:j.accounts)===null||S===void 0?void 0:S.id)===null||b===void 0||b.renderButton(G.current,{type:u,theme:n,size:l,text:r,shape:a,logo_alignment:d,width:h,locale:m,click_listener:R}),s&&((E=(_=(N=window==null?void 0:window.google)===null||N===void 0?void 0:N.accounts)===null||_===void 0?void 0:_.id)===null||E===void 0||E.prompt(D.current)),()=>{var g,f,v;s&&((v=(f=(g=window==null?void 0:window.google)===null||g===void 0?void 0:g.accounts)===null||f===void 0?void 0:f.id)===null||v===void 0||v.cancel())}},[I,M,s,u,n,l,r,a,d,h,m]),U.createElement("div",{...x,ref:G,style:{height:o2[l],...x==null?void 0:x.style}})}function i2(){const{nonce:t,isLoading:o,handleGoogleSuccess:s,handleGoogleError:c}=X();return e.jsx("div",{className:"bg-background flex min-h-screen items-center justify-center p-4",children:e.jsxs(B,{className:"w-full max-w-md p-8",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-2xl font-bold",children:"Welcome"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to access your dashboard"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(e2,{clientId:k.googleClientId,children:e.jsx("div",{className:"flex justify-center",children:o?e.jsx(Z,{disabled:!0,className:"w-full",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Signing in..."]})}):e.jsx(c2,{nonce:t,onSuccess:s,onError:c,useOneTap:!1,auto_select:!1,theme:"outline",size:"large",text:"signin_with",shape:"rectangular"})})}),e.jsx("div",{className:"text-muted-foreground text-center text-sm",children:e.jsx("p",{children:"By signing in, you agree to our Terms of Service and Privacy Policy."})})]})]})})}const n2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='512px'%20height='193px'%20viewBox='0%200%20512%20193'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20preserveAspectRatio='xMidYMid'%3e%3cg%3e%3cpolygon%20fill='%233D3D3D'%20points='376.818362%20158.243566%20391.609181%20120.840549%20434.316067%20120.840549%20414.048526%2064.1021885%20439.396722%203.2018623e-05%20512.000001%20192.769205%20458.457706%20192.769205%20446.051149%20158.243566'%3e%3c/polygon%3e%3cpolygon%20fill='%235A0FC8'%20points='331.139673%20192.76973%20408.862952%200.000304174426%20357.335083%200.000560323934%20304.16787%20124.572484%20266.360657%200.00081647082%20226.753837%200.00081647082%20186.158952%20124.572484%20157.530493%2067.8076311%20131.622821%20147.624549%20157.926821%20192.76973%20208.636591%20192.76973%20245.320394%2081.0556311%20280.296394%20192.76973'%3e%3c/polygon%3e%3cpath%20d='M48.9117387,126.594779%20L80.6502305,126.594779%20C90.2643944,126.594779%2098.8254436,125.52173%20106.333378,123.375631%20L114.541378,98.0882869%20L137.481444,27.4139262%20C135.733509,24.6434344%20133.737968,22.0239459%20131.494821,19.5558016%20C119.71646,6.51845082%20102.483673,0%2079.7959354,0%20L0,0%20L0,192.769205%20L48.9117387,192.769205%20L48.9117387,126.594779%20Z%20M90.9224928,44.3484836%20C95.5231485,48.9787787%2097.8232141,55.1749754%2097.8232141,62.9375984%20C97.8232141,70.7597623%2095.8001321,76.9635656%2091.7542305,81.5490082%20C87.3188207,86.6440902%2079.1517387,89.1915%2067.2535092,89.1915%20L48.9117387,89.1915%20L48.9117387,37.4026475%20L67.3883289,37.4026475%20C78.477378,37.4026475%2086.3220994,39.7179262%2090.9224928,44.3484836%20Z'%20fill='%233D3D3D'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",l2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='a'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20952.54%20849.07'%3e%3cdefs%3e%3cstyle%3e.b,.c{opacity:.3;}.b,.d{fill:%2317bef0;}.e{fill:%230e86a9;opacity:.4;}.f{stroke:%2300bff3;stroke-width:40px;}.f,.c,.g{fill:none;stroke-miterlimit:10;}.c{stroke:%2329290d;}.c,.g{stroke-linecap:round;stroke-width:16px;}.g{opacity:.5;stroke:%235a9298;}.h{fill:%23005068;opacity:.1;}%3c/style%3e%3c/defs%3e%3cellipse%20class='f'%20cx='476.27'%20cy='424.53'%20rx='456.27'%20ry='172.54'%20transform='translate(-129.52%20624.73)%20rotate(-60)'/%3e%3cellipse%20class='f'%20cx='476.27'%20cy='424.53'%20rx='456.27'%20ry='172.54'/%3e%3cellipse%20class='f'%20cx='476.27'%20cy='424.53'%20rx='172.54'%20ry='456.27'%20transform='translate(-148.46%20295.01)%20rotate(-30)'/%3e%3ccircle%20class='e'%20cx='476.27'%20cy='424.53'%20r='97.5'/%3e%3ccircle%20class='b'%20cx='476.27'%20cy='424.53'%20r='109'/%3e%3ccircle%20class='d'%20cx='476.27'%20cy='424.53'%20r='85.5'/%3e%3cline%20class='g'%20x1='502.53'%20y1='451.4'%20x2='538.53'%20y2='451.4'/%3e%3cline%20class='c'%20x1='484.53'%20y1='387.4'%20x2='520.53'%20y2='387.4'/%3e%3cpath%20class='h'%20d='M458.53,424.4c3.52-18.46,11.58-43.8,18-64,2.37-7.45,4.7-14.48,6.94-21.04-2.38-.2-4.78-.32-7.2-.32-47.22,0-85.5,38.28-85.5,85.5,0,41.02,28.9,75.28,67.44,83.57-7.86-38.35-.24-80.75,.32-83.71Z'/%3e%3cpath%20class='d'%20d='M437.53,442.4c-4.39,0-8-3.61-8-8s3.61-8,8-8v16Z'/%3e%3crect%20class='d'%20x='437.53'%20y='426.4'%20width='27'%20height='16'/%3e%3c/svg%3e",r2="data:image/svg+xml,%3csvg%20id='Calque_1'%20data-name='Calque%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20255.21%20623.91'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23007af4;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='M74.62,277.46l1.24-.13,34.78-3.28L57.17,215.39A96.47,96.47,0,0,1,32,150.3H3A125.3,125.3,0,0,0,35.8,234.87Z'/%3e%3cpath%20class='cls-1'%20d='M177.13,347l-36,3.4,53.32,58.51A96.41,96.41,0,0,1,219.63,474h28.92a125.28,125.28,0,0,0-32.76-84.57Z'/%3e%3cpath%20class='cls-1'%20d='M253.69,231.68c-6.33-31.3-30.89-54.09-62.57-58.07l-6.35-.79a49.61,49.61,0,0,1-43.35-49.13v-20a52.75,52.75,0,1,0-28.91-.36v20.38a78.56,78.56,0,0,0,68.65,77.82l6.36.8c23.24,2.92,34.78,20,37.83,35.1s-.93,35.32-21.22,47a73.81,73.81,0,0,1-30.06,9.62l-95.66,9a102.45,102.45,0,0,0-41.8,13.38C9,332.45-4.81,363,1.52,394.29s30.89,54.08,62.57,58.06l6.35.8a49.6,49.6,0,0,1,43.35,49.12v18a52.75,52.75,0,1,0,28.91.26V502.27a78.55,78.55,0,0,0-68.65-77.81l-6.36-.8c-23.24-2.92-34.78-20.05-37.83-35.11s.93-35.32,21.22-47a73.68,73.68,0,0,1,30.06-9.63l95.66-9a102.45,102.45,0,0,0,41.8-13.38C246.25,293.52,260,263,253.69,231.68Z'/%3e%3c/svg%3e",a2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='256px'%20height='140px'%20viewBox='0%200%20256%20140'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20preserveAspectRatio='xMidYMid'%3e%3cg%3e%3cpath%20d='M78.0659341,92.5875806%20C90.8837956,92.5875806%20101.274726,82.1966508%20101.274726,69.3787894%20C101.274726,56.5609279%2090.8837956,46.1699982%2078.0659341,46.1699982%20C65.2480726,46.1699982%2054.8571429,56.5609279%2054.8571429,69.3787894%20C54.8571429,82.1966508%2065.2480726,92.5875806%2078.0659341,92.5875806%20Z%20M23.2087913,139.005163%20C36.0266526,139.005163%2046.4175825,128.614233%2046.4175825,115.796372%20C46.4175825,102.97851%2036.0266526,92.5875806%2023.2087913,92.5875806%20C10.3909298,92.5875806%200,102.97851%200,115.796372%20C0,128.614233%2010.3909298,139.005163%2023.2087913,139.005163%20Z%20M232.791209,139.005163%20C245.60907,139.005163%20256,128.614233%20256,115.796372%20C256,102.97851%20245.60907,92.5875806%20232.791209,92.5875806%20C219.973347,92.5875806%20209.582418,102.97851%20209.582418,115.796372%20C209.582418,128.614233%20219.973347,139.005163%20232.791209,139.005163%20Z'%20fill='%23000000'%3e%3c/path%3e%3cpath%20d='M156.565464,70.3568084%20C155.823426,62.6028163%20155.445577,56.1490255%20149.505494,51.6131676%20C141.982638,45.8687002%20133.461166,49.5960243%20122.964463,45.8072968%20C112.650326,43.3121427%20105,34.1545727%20105,23.2394367%20C105,10.4046502%20115.577888,0%20128.626373,0%20C138.29063,0%20146.599638,5.70747659%20150.259573,13.8825477%20C155.861013,24.5221258%20152.220489,35.3500418%20159.258242,40.8041273%20C167.591489,47.2621895%20178.826167,42.5329154%20191.362109,48.6517412%20C195.390112,50.5026944%20198.799584,53.4384578%20201.202056,57.0769224%20C203.604528,60.7153869%20205,65.0565524%20205,69.7183101%20C205,80.633446%20197.349674,89.7910161%20187.035538,92.2861702%20C176.538834,96.0748977%20168.017363,92.3475736%20160.494506,98.092041%20C152.03503,104.551712%20156.563892,115.358642%20149.669352,126.774447%20C145.756163,134.291567%20137.802119,139.43662%20128.626373,139.43662%20C115.577888,139.43662%20105,129.03197%20105,116.197184%20C105,106.873668%20110.581887,98.832521%20118.637891,95.1306146%20C131.173833,89.0117889%20142.408511,93.7410629%20150.741758,87.2830007%20C155.549106,83.5574243%20156.565464,77.8102648%20156.565464,70.3568084%20Z'%20fill='%23D0021B'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",d2="data:image/svg+xml,%3csvg%20fill='none'%20height='256'%20viewBox='0%200%20256%20256'%20width='256'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20fill='%233178c6'%20height='256'%20rx='128'%20width='256'/%3e%3cpath%20clip-rule='evenodd'%20d='m140.463%20160.712v25.03c4.017%202.086%208.767%203.651%2014.25%204.694%205.484%201.043%2011.264%201.564%2017.34%201.564%205.921%200%2011.547-.574%2016.876-1.721s10.002-3.037%2014.018-5.671c4.016-2.633%207.196-6.075%209.539-10.325s3.514-9.503%203.514-15.761c0-4.537-.669-8.513-2.008-11.929-1.339-3.415-3.27-6.453-5.793-9.112-2.523-2.66-5.548-5.045-9.075-7.157s-7.505-4.107-11.933-5.984c-3.244-1.356-6.153-2.673-8.728-3.95-2.574-1.278-4.762-2.581-6.565-3.911-1.802-1.33-3.192-2.738-4.17-4.224-.979-1.486-1.468-3.168-1.468-5.045%200-1.721.438-3.272%201.313-4.654.876-1.382%202.111-2.5686%203.707-3.5594%201.597-.9908%203.553-1.7599%205.87-2.3075%202.317-.5475%204.892-.8213%207.724-.8213%202.06%200%204.235.1565%206.526.4694%202.292.3128%204.596.7952%206.913%201.447%202.317.6519%204.57%201.4732%206.758%202.4638%202.188.991%204.209%202.138%206.063%203.442v-23.3879c-3.759-1.4601-7.865-2.5422-12.319-3.2461-4.454-.704-9.564-1.056-15.331-1.056-5.87%200-11.431.6388-16.683%201.9164s-9.873%203.2722-13.864%205.9838-7.144%206.1663-9.461%2010.3641-3.476%209.2167-3.476%2015.0577c0%207.457%202.124%2013.818%206.372%2019.085s10.697%209.726%2019.348%2013.376c3.398%201.408%206.565%202.79%209.5%204.146%202.934%201.355%205.47%202.763%207.607%204.223%202.137%201.461%203.823%203.051%205.059%204.772s1.854%203.676%201.854%205.866c0%201.617-.386%203.116-1.159%204.498-.772%201.382-1.943%202.581-3.514%203.598-1.57%201.017-3.527%201.812-5.87%202.386-2.343.573-5.085.86-8.225.86-5.355%200-10.659-.952-15.911-2.855s-10.118-4.758-14.598-8.565zm-42.7525-62.1709h32.2895v-20.5411h-90v20.5411h32.1316v91.4589h25.5789z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3c/svg%3e",u2="data:image/svg+xml,%3csvg%20width='410'%20height='404'%20viewBox='0%200%20410%20404'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M399.641%2059.5246L215.643%20388.545C211.844%20395.338%20202.084%20395.378%20198.228%20388.618L10.5817%2059.5563C6.38087%2052.1896%2012.6802%2043.2665%2021.0281%2044.7586L205.223%2077.6824C206.398%2077.8924%20207.601%2077.8904%20208.776%2077.6763L389.119%2044.8058C397.439%2043.2894%20403.768%2052.1434%20399.641%2059.5246Z'%20fill='url(%23paint0_linear)'/%3e%3cpath%20d='M292.965%201.5744L156.801%2028.2552C154.563%2028.6937%20152.906%2030.5903%20152.771%2032.8664L144.395%20174.33C144.198%20177.662%20147.258%20180.248%20150.51%20179.498L188.42%20170.749C191.967%20169.931%20195.172%20173.055%20194.443%20176.622L183.18%20231.775C182.422%20235.487%20185.907%20238.661%20189.532%20237.56L212.947%20230.446C216.577%20229.344%20220.065%20232.527%20219.297%20236.242L201.398%20322.875C200.278%20328.294%20207.486%20331.249%20210.492%20326.603L212.5%20323.5L323.454%20102.072C325.312%2098.3645%20322.108%2094.137%20318.036%2094.9228L279.014%20102.454C275.347%20103.161%20272.227%2099.746%20273.262%2096.1583L298.731%207.86689C299.767%204.27314%20296.636%200.855181%20292.965%201.5744Z'%20fill='url(%23paint1_linear)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear'%20x1='6.00017'%20y1='32.9999'%20x2='235'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%2341D1FF'/%3e%3cstop%20offset='1'%20stop-color='%23BD34FE'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear'%20x1='194.651'%20y1='8.81818'%20x2='236.076'%20y2='292.989'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FFEA83'/%3e%3cstop%20offset='0.0833333'%20stop-color='%23FFDD35'/%3e%3cstop%20offset='1'%20stop-color='%23FFA800'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";function x2(){const t=J(),{user:o}=q.useAuth(),{profile:s}=H(),[c,u]=i.useState(!0),n="w-1/10 h-1/10 m-1",l=t?"w-2/5 h-1/3":"w-1/3 h-2/5";return o?e.jsxs("div",{children:[e.jsx("meta",{name:"title",content:"Welcome"}),c&&e.jsx(B,{className:"mx-2 my-3 bg-green-50 p-4",children:e.jsx(V,{className:"space-y-4",children:e.jsxs("div",{className:"flex justify-between space-y-3",children:[e.jsx("div",{children:e.jsxs(Y,{className:"text-muted-foreground text-xl",children:["Selamat Datang, ",(s==null?void 0:s.fullName)||"-"," 👋"]})}),e.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>u(!c),children:[" ",e.jsx($,{})," "]})]})})}),e.jsxs("div",{className:`mt-4 flex h-full w-full items-center justify-center ${t?"flex-col":"flex-row"}`,children:[e.jsx("img",{alt:"react-router",src:a2,className:n}),e.jsx("img",{alt:"vite",src:u2,className:n}),e.jsx("img",{alt:"typescript",src:d2,className:n}),e.jsx("img",{alt:"react",src:l2,className:l}),e.jsx("img",{alt:"recoil",src:r2,className:n}),e.jsx("img",{alt:"pwa",src:n2,className:n})]})]}):e.jsx(i2,{})}export{x2 as default};
